{
  "name": "Today Matters — Location‑Anchored Sessionizer",
  "version": "0.1.0",
  "owner": "Cole",
  "status": "draft",
  "branchName": "feat/sessionizer-actual-timeline",
  "problem": {
    "summary": "Actual timeline is noisy and overlapping due to independent location and screen-time blocks.",
    "root_causes": [
      "Location blocks and screen-time blocks overlap instead of collapsing into sessions.",
      "No intent labeling (Work/Leisure/Distracted Work) at the session level.",
      "Commute handling is not aligned with UX needs (<10m should annotate, not create a block)."
    ]
  },
  "goal": {
    "primary": "Create a sessionizer layer that outputs place‑anchored, intent‑labeled Actual sessions with expandable granular detail.",
    "success_metrics": [
      "Default timeline shows sessions (no overlapping blocks).",
      "Unknown minutes reduced by 80% in non‑travel windows.",
      "Session labels reflect app category mix (Work/Leisure/Distracted Work)."
    ]
  },
  "non_goals": [
    "Advanced semantic inference beyond place + app categories.",
    "New third‑party APIs."
  ],
  "userStories": [
    {
      "id": "US-001",
      "title": "Generate location‑anchored session blocks",
      "description": "Collapse location + screen time into place‑anchored sessions with summaries.",
      "acceptance_criteria": [
        "Sessions start/end at location changes.",
        "Each session includes top apps + minutes.",
        "Granular events remain accessible via expansion."
      ],
      "priority": 1,
      "passes": false
    },
    {
      "id": "US-002",
      "title": "Intent labeling (Work/Leisure/Distracted Work)",
      "description": "Label sessions based on app category mix.",
      "acceptance_criteria": [
        "Work ≥ 60% → Work.",
        "Social+Entertainment ≥ 60% → Leisure.",
        "Work 40–60% + Social/Entertainment ≥ 25% → Distracted Work."
      ],
      "priority": 2,
      "passes": false
    },
    {
      "id": "US-003",
      "title": "Commute handling <10 min",
      "description": "Only create Commute blocks when travel ≥ 10 min; otherwise annotate next session.",
      "acceptance_criteria": [
        "Travel ≥ 10 min creates Commute block.",
        "Travel < 10 min becomes annotation on next session."
      ],
      "priority": 3,
      "passes": false
    },
    {
      "id": "US-004",
      "title": "Micro‑gap smoothing",
      "description": "Merge gaps <5 min into adjacent blocks.",
      "acceptance_criteria": [
        "No standalone blocks for gaps <5 minutes.",
        "Adjacent session times are extended accordingly."
      ],
      "priority": 4,
      "passes": false
    },
    {
      "id": "US-005",
      "title": "Default UI uses session blocks",
      "description": "Calendar renders session blocks by default; granular details on tap.",
      "acceptance_criteria": [
        "Default view shows session blocks only.",
        "Tap expands to granular segments."
      ],
      "priority": 5,
      "passes": false
    }
  ],
  "principles": [
    "Session blocks are summaries; raw evidence remains the truth.",
    "Deterministic output for identical inputs.",
    "Respect user edits and protected events."
  ]
}
